# æ•°æ®æµä¸­çš„ä¸­ä½æ•°

å¦‚ä½•å¾—åˆ°ä¸€ä¸ªæ•°æ®æµä¸­çš„ä¸­ä½æ•°ï¼Ÿå¦‚æœä»æ•°æ®æµä¸­è¯»å‡ºå¥‡æ•°ä¸ªæ•°å€¼ï¼Œé‚£ä¹ˆä¸­ä½æ•°å°±æ˜¯æ‰€æœ‰æ•°å€¼æ’åºä¹‹åä½äºä¸­é—´çš„æ•°å€¼ã€‚å¦‚æœä»æ•°æ®æµä¸­è¯»å‡ºå¶æ•°ä¸ªæ•°å€¼ï¼Œé‚£ä¹ˆä¸­ä½æ•°å°±æ˜¯æ‰€æœ‰æ•°å€¼æ’åºä¹‹åä¸­é—´ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼ã€‚æˆ‘ä»¬ä½¿ç”¨Insert()æ–¹æ³•è¯»å–æ•°æ®æµï¼Œä½¿ç”¨GetMedian()æ–¹æ³•è·å–å½“å‰è¯»å–æ•°æ®çš„ä¸­ä½æ•°ã€‚

## Solution

- æ–¹æ³•ä¸€ï¼šç»´æŠ¤ä¸€ä¸ªæ’åºçš„æ•°ç»„

```java
import java.util.ArrayList;

public class Solution {
    private ArrayList<Integer> list = new ArrayList<>();
    
    public void Insert(Integer num) {
        if (list.isEmpty()) {
            list.add(num);
            return;
        }
        
        for (int i=list.size()-1; i>=0; i--) {
            if (i==0 || list.get(i-1) <= num) {
                list.add(i, num);
                break;
            }
        }
    }

    public Double GetMedian() {
        int n = list.size();
        if (n % 2 != 0) {
            return list.get(n/2) * 1.0;
        } else {
            return (list.get(n/2-1) + list.get(n/2)) / 2.0;
        }
    }
}
```

- æ–¹æ³•äºŒï¼šæœ€å¤§å †æœ€å°å †

![image-20190902121405565](_image/image-20190902121405565.png)

ç”¨MaxHeapå­˜å‚¨â€œå·¦è¾¹â€çš„æ•°æ®ï¼ˆè¾ƒå°ï¼‰ï¼Œç”¨MinHeapå­˜å‚¨â€œå³è¾¹â€çš„æ•°æ®ï¼ˆè¾ƒå¤§ï¼‰ã€‚å³è¾¹MinHeapä¸­çš„æœ€å°å€¼éƒ½è¦æ¯”å·¦è¾¹MaxHeapä¸­çš„æœ€å¤§å€¼è¦å¤§ï¼ˆæˆ–ç›¸ç­‰ï¼‰ã€‚

å½“sizeä¸ºå¶æ•°æ—¶ï¼Œæ’å…¥åˆ°å·¦è¾¹MaxHeapğŸ‘ˆï¼Œç„¶åæŠŠMaxHeapæ ¹èŠ‚ç‚¹ï¼ˆæœ€å¤§å€¼ï¼‰æ’å…¥åˆ°å³è¾¹ğŸ‘‰MinHeapä¸­ã€‚

å½“sizeä¸ºå¥‡æ•°æ—¶ï¼Œæ’å…¥åˆ°å³è¾¹ğŸ‘‰MinHeapï¼Œç„¶åæŠŠMinHeapæ ¹èŠ‚ç‚¹ï¼ˆæœ€å°å€¼ï¼‰æ’å…¥åˆ°å·¦è¾¹MaxHeapğŸ‘ˆä¸­ã€‚

GetMedianï¼šå¦‚æœsizeä¸ºå¥‡æ•°ï¼Œä¸­ä½æ•°å°±æ˜¯MinHeapçš„æ ¹èŠ‚ç‚¹ï¼›å¦‚æœsizeä¸ºå¶æ•°æ—¶ï¼Œä¸­ä½æ•°å°±æ˜¯ä¸¤ä¸ªå †é¦–å…ƒç´ çš„å¹³å‡å€¼ã€‚

```java
import java.util.*;

public class Solution {

    private PriorityQueue<Integer> maxHeap = new PriorityQueue<>(Collections.reverseOrder());
    private PriorityQueue<Integer> minHeap = new PriorityQueue<>();
    private int size = 0;
    
    public void Insert(Integer num) {
        if (size++ % 2 == 0) {
            maxHeap.offer(num);
            minHeap.offer(maxHeap.poll());
        } else {
            minHeap.offer(num);
            maxHeap.offer(minHeap.poll());
        }
    }

    public Double GetMedian() {
        if (size % 2 == 0) {
            return (maxHeap.peek() + minHeap.peek()) / 2.0;
        } else {
            return minHeap.peek() * 1.0;
        }
    }
}
```

